// KIPM Knowledge Base - All data stored in JavaScript
const kipmData = {
    fees: {
        title: "ğŸ’° KIPM Fee Structure 2024",
        content: `
        <strong>ğŸ“ Engineering (B.Tech):</strong><br>
        â€¢ Annual Tuition Fee: â‚¹85,000 - â‚¹95,000<br>
        â€¢ One-time Admission Fee: â‚¹15,000<br>
        â€¢ Hostel Fee: â‚¹55,000 - â‚¹65,000 per year<br>
        â€¢ Mess Fee: â‚¹35,000 - â‚¹40,000 per year<br><br>
        
        <strong>ğŸ’¼ Management Programs:</strong><br>
        â€¢ MBA: â‚¹75,000 - â‚¹85,000 per year<br>
        â€¢ BBA: â‚¹55,000 - â‚¹65,000 per year<br>
        â€¢ BCA: â‚¹45,000 - â‚¹55,000 per year<br><br>
        
        <strong>ğŸ’Š Pharmacy Programs:</strong><br>
        â€¢ B.Pharm: â‚¹70,000 - â‚¹80,000 per year<br>
        â€¢ D.Pharm: â‚¹50,000 - â‚¹60,000 per year<br><br>
        
        <strong>ğŸ“š Commerce:</strong><br>
        â€¢ B.Com: â‚¹40,000 - â‚¹50,000 per year<br><br>
        
        <strong>ğŸ¯ Additional Costs:</strong><br>
        â€¢ Books & Study Material: â‚¹8,000 - â‚¹12,000<br>
        â€¢ Uniform & ID Card: â‚¹3,000 - â‚¹5,000<br>
        â€¢ Transport (optional): â‚¹15,000 - â‚¹25,000<br><br>
        
        <strong>ğŸ’³ Payment Options:</strong><br>
        â€¢ Semester-wise payment available<br>
        â€¢ Education loan assistance<br>
        â€¢ EMI facilities available<br>
        â€¢ Scholarships for merit students
        `
    },
    courses: {
        title: "ğŸ“ KIPM Academic Programs",
        content: `
        <strong>ğŸ”¹ Engineering (B.Tech) - AKTU Code: 751</strong><br>
        â€¢ Computer Science & Engineering<br>
        â€¢ Mechanical Engineering<br>
        â€¢ Civil Engineering<br>
        â€¢ Electrical Engineering<br>
        â€¢ Electronics & Communication Engineering<br>
        â€¢ Duration: 4 years<br><br>
        
        <strong>ğŸ”¹ Management Programs - AKTU Code: 517</strong><br>
        â€¢ MBA (Master of Business Administration) - 2 years<br>
        â€¢ BBA (Bachelor of Business Administration) - 3 years<br>
        â€¢ BCA (Bachelor of Computer Applications) - 3 years<br><br>
        
        <strong>ğŸ”¹ Pharmacy Programs - AKTU Code: 516</strong><br>
        â€¢ B.Pharm (Bachelor of Pharmacy) - 4 years<br>
        â€¢ M.Pharm (Master of Pharmacy) - 2 years<br>
        â€¢ D.Pharm (Diploma in Pharmacy) - 2 years<br><br>
        
        <strong>ğŸ”¹ Commerce - DDU Code: 858</strong><br>
        â€¢ B.Com (Bachelor of Commerce) - 3 years<br><br>
        
        <strong>ğŸ“‹ Admission Requirements:</strong><br>
        â€¢ Valid entrance exam scores (JEE/UPSEE for Engineering)<br>
        â€¢ 10+2 qualification from recognized board<br>
        â€¢ Merit-based selection process<br>
        â€¢ All programs are AICTE approved
        `
    },
    placements: {
        title: "ğŸ’¼ KIPM Placement Excellence",
        content: `
        <strong>ğŸ† Outstanding Statistics:</strong><br>
        â€¢ <strong>245+ Recruiting Companies</strong><br>
        â€¢ <strong>1885+ Job Offers</strong><br>
        â€¢ <strong>Highest Package:</strong> â‚¹12+ LPA<br>
        â€¢ <strong>Average Package:</strong> â‚¹4.5 LPA<br>
        â€¢ <strong>Placement Rate:</strong> 85%+<br><br>
        
        <strong>ğŸ¢ Top IT Companies:</strong><br>
        â€¢ TCS, Infosys, Wipro, HCL Technologies<br>
        â€¢ Tech Mahindra, Cognizant, Accenture<br>
        â€¢ Microsoft, Google (selected students)<br><br>
        
        <strong>ğŸ¦ Banking & Finance:</strong><br>
        â€¢ HDFC Bank, Kotak Mahindra Bank<br>
        â€¢ Bandhan Bank, Annapurna Finance<br>
        â€¢ ICICI Bank, SBI<br><br>
        
        <strong>ğŸ­ Manufacturing & Core:</strong><br>
        â€¢ Maruti Suzuki, Bajaj Auto<br>
        â€¢ Kent RO Systems, L&T<br>
        â€¢ Tata Motors, Forever Distillery<br><br>
        
        <strong>ğŸ“š Education Sector:</strong><br>
        â€¢ BYJU'S, Physics Wallah<br>
        â€¢ Unacademy, Exotic Learning<br>
        â€¢ Vedantu, Toppr<br><br>
        
        <strong>ğŸ¯ Placement Support:</strong><br>
        â€¢ Dedicated placement cell<br>
        â€¢ Industry-oriented training<br>
        â€¢ Mock interviews & group discussions<br>
        â€¢ Resume building workshops<br>
        â€¢ Soft skills development
        `
    },
    contact: {
        title: "ğŸ“ KIPM Contact Information",
        content: `
        <strong>ğŸ« Main Campus Address:</strong><br>
        KIPM-Technical Campus<br>
        BL 1 & 2, Sector-9, GIDA<br>
        Gorakhpur, Uttar Pradesh - 273209<br><br>
        
        <strong>ğŸ“± Admission Helplines:</strong><br>
        â€¢ <strong>Engineering & Management:</strong> +91-9519113070<br>
        â€¢ <strong>Pharmacy Programs:</strong> +91-8009902936<br>
        â€¢ <strong>General Inquiries:</strong> +91-8009902937<br>
        â€¢ <strong>Additional Support:</strong> +91-8009902938<br><br>
        
        <strong>ğŸ¢ City Office:</strong><br>
        Charu Chandrapuri<br>
        Near Cantt Thana<br>
        Gorakhpur - 273001<br><br>
        
        <strong>ğŸŒ Online Presence:</strong><br>
        â€¢ Website: www.kipm.edu.in<br>
        â€¢ Email: info@kipm.edu.in<br><br>
        
        <strong>â° Office Hours:</strong><br>
        â€¢ Monday to Saturday: 9:00 AM - 5:00 PM<br>
        â€¢ Sunday: Closed<br>
        â€¢ Emergency Contact: Available 24/7
        `
    },
    facilities: {
        title: "ğŸ¢ KIPM World-Class Facilities",
        content: `
        <strong>ğŸ  Hostel Facilities:</strong><br>
        â€¢ Separate boys and girls hostels<br>
        â€¢ TV lounge and recreational areas<br>
        â€¢ Computer lab with internet access<br>
        â€¢ Swimming pool and gymnasium<br>
        â€¢ Reading rooms and study areas<br>
        â€¢ Indoor games: Table tennis, carrom, chess<br>
        â€¢ 24/7 security and CCTV surveillance<br>
        â€¢ Laundry and housekeeping services<br><br>
        
        <strong>ğŸ¥ Medical Facilities:</strong><br>
        â€¢ On-campus medical center<br>
        â€¢ Qualified medical staff<br>
        â€¢ Free medical aid for students<br>
        â€¢ Medical insurance coverage<br>
        â€¢ Tie-ups with local hospitals<br>
        â€¢ Emergency medical services<br><br>
        
        <strong>âš½ Sports & Recreation:</strong><br>
        â€¢ Multiple sports grounds<br>
        â€¢ Basketball and volleyball courts<br>
        â€¢ Cricket ground with proper facilities<br>
        â€¢ Badminton courts (indoor)<br>
        â€¢ Gym with modern equipment<br>
        â€¢ Yoga and meditation center<br><br>
        
        <strong>ğŸšŒ Transport Facility:</strong><br>
        â€¢ College bus service from various routes<br>
        â€¢ GPS-enabled buses for safety<br>
        â€¢ Trained and verified drivers<br>
        â€¢ Regular maintenance and safety checks<br><br>
        
        <strong>ğŸ¤ Academic Infrastructure:</strong><br>
        â€¢ 4 air-conditioned seminar halls (150 seats each)<br>
        â€¢ Modern audio-visual equipment<br>
        â€¢ High-speed internet (Wi-Fi campus)<br>
        â€¢ Well-equipped laboratories<br>
        â€¢ Central library with digital resources<br>
        â€¢ Computer labs with latest software
        `
    },
    leadership: {
        title: "ğŸ‘¨â€ğŸ’¼ KIPM Leadership & Faculty",
        content: `
        <strong>ğŸ¯ Leadership Team:</strong><br><br>
        
        <strong>Er. R.D. Singh</strong> - Founder & Chairman<br>
        <em>"Nurturing Ethical Technocrats"</em><br>
        â€¢ Visionary leader with 25+ years in education<br>
        â€¢ Committed to engineering excellence<br><br>
        
        <strong>Mr. Vinod Kumar Singh</strong> - Secretary<br>
        <em>"Providing Culture Base, Professional Environment"</em><br>
        â€¢ Building treasure-house of talent and intelligence<br><br>
        
        <strong>Dr. M.Z.R. Khan</strong> - Director, Engineering<br>
        â€¢ Leading College of Engineering & Technology<br>
        â€¢ 11 years of glorious legacy<br><br>
        
        <strong>Dr. J.N. Mishra</strong> - Director, Pharmacy<br>
        â€¢ Managing pharmacy programmes with excellence<br><br>
        
        <strong>Dr. Deepak Kumar Srivastava</strong> - Director, Management<br>
        â€¢ Leading College of Management Studies<br><br>
        
        <strong>ğŸ‘¨â€ğŸ« Faculty Strength:</strong><br>
        â€¢ <strong>155+ Faculty Members</strong><br>
        â€¢ PhD qualified professors: 60%<br>
        â€¢ Industry experienced faculty: 40%<br>
        â€¢ Student-Faculty ratio: 15:1<br>
        â€¢ Regular faculty development programs<br><br>
        
        <strong>ğŸ›ï¸ Departments:</strong><br>
        â€¢ <strong>12 Specialized Departments</strong><br>
        â€¢ All departments with experienced faculty<br>
        â€¢ Modern labs and equipment
        `
    },
    achievements: {
        title: "ğŸ† KIPM Achievements & Recognition",
        content: `
        <strong>ğŸ¥‰ RANKED 13th POSITION AMONGST TOP 25 COLLEGES BY AKTU</strong><br>
        <em>A prestigious recognition of our academic excellence</em><br><br>
        
        <strong>ğŸ“Š Institutional Statistics:</strong><br>
        â€¢ <strong>155 Faculty Members</strong><br>
        â€¢ <strong>12 Academic Departments</strong><br>
        â€¢ <strong>15 Awards & Recognition</strong><br>
        â€¢ <strong>2500+ Students</strong><br>
        â€¢ <strong>245+ Recruiting Companies</strong><br>
        â€¢ <strong>1885+ Job Offers</strong><br><br>
        
        <strong>ğŸ“ Academic Excellence:</strong><br>
        â€¢ AICTE approved programs<br>
        â€¢ AKTU affiliated courses<br>
        â€¢ High pass percentage in university exams<br>
        â€¢ Research publications by faculty<br><br>
        
        <strong>ğŸ… Recent Achievements:</strong><br>
        â€¢ Best Engineering College Award (Regional)<br>
        â€¢ Excellence in Placement Award<br>
        â€¢ Innovation in Teaching Award<br>
        â€¢ Industry Interface Excellence<br>
        â€¢ Social Responsibility Recognition
        `
    }
};

// Initialize chat when page loads
document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('welcomeTime').textContent = getCurrentTime();
    document.getElementById('chatInput').focus();
});

// Handle Enter key press
function handleKeyPress(event) {
    if (event.key === 'Enter') {
        sendMessage();
    }
}

// Send message function
function sendMessage() {
    const input = document.getElementById('chatInput');
    const message = input.value.trim();
    
    if (message) {
        addMessage(message, 'user');
        input.value = '';
        
        // Show typing indicator
        showTypingIndicator();
        
        // Generate response
        setTimeout(() => {
            hideTypingIndicator();
            const response = generateAIResponse(message);
            addMessage(response.answer, 'bot');
            
            // Add suggestion chips
            if (response.suggestions) {
                addSuggestionChips(response.suggestions);
            }
        }, 1000);
    }
}

// Quick question function
function askQuestion(question) {
    addMessage(question, 'user');
    showTypingIndicator();
    
    setTimeout(() => {
        hideTypingIndicator();
        const response = generateAIResponse(question);
        addMessage(response.answer, 'bot');
        
        if (response.suggestions) {
            addSuggestionChips(response.suggestions);
        }
    }, 800);
}

// Enhanced AI response generator
function generateAIResponse(question) {
    const questionLower = question.toLowerCase();
    
    // Fee-related questions
    if (questionLower.includes('fee') || questionLower.includes('cost') || 
        questionLower.includes('price') || questionLower.includes('money') ||
        questionLower.includes('expense') || questionLower.includes('scholarship')) {
        return {
            answer: kipmData.fees.title + '<br><br>' + kipmData.fees.content,
            suggestions: ["Payment options available?", "Any scholarships offered?", "Hostel fees included?"]
        };
    }
    
    // Course-related questions
    else if (questionLower.includes('course') || questionLower.includes('program') || 
             questionLower.includes('study') || questionLower.includes('degree') ||
             questionLower.includes('branch') || questionLower.includes('engineering')) {
        return {
            answer: kipmData.courses.title + '<br><br>' + kipmData.courses.content,
            suggestions: ["What are eligibility criteria?", "How to apply for admission?", "What is the duration?"]
        };
    }
    
    // Placement-related questions
    else if (questionLower.includes('placement') || questionLower.includes('job') || 
             questionLower.includes('career') || questionLower.includes('salary') ||
             questionLower.includes('package') || questionLower.includes('company')) {
        return {
            answer: kipmData.placements.title + '<br><br>' + kipmData.placements.content,
            suggestions: ["Which companies visit most?", "How to prepare for placements?", "What's the selection process?"]
        };
    }
    
    // Contact-related questions
    else if (questionLower.includes('contact') || questionLower.includes('phone') || 
             questionLower.includes('address') || questionLower.includes('location') ||
             questionLower.includes('reach') || questionLower.includes('helpline')) {
        return {
            answer: kipmData.contact.title + '<br><br>' + kipmData.contact.content,
            suggestions: ["How to reach campus?", "What are office hours?", "Any other contact methods?"]
        };
    }
    
    // Facility-related questions
    else if (questionLower.includes('facility') || questionLower.includes('hostel') || 
             questionLower.includes('sports') || questionLower.includes('amenity') ||
             questionLower.includes('campus') || questionLower.includes('library')) {
        return {
            answer: kipmData.facilities.title + '<br><br>' + kipmData.facilities.content,
            suggestions: ["Hostel booking process?", "Sports activities available?", "Library timings?"]
        };
    }
    
    // Leadership/Faculty questions
    else if (questionLower.includes('faculty') || questionLower.includes('teacher') || 
             questionLower.includes('director') || questionLower.includes('leadership') ||
             questionLower.includes('chairman') || questionLower.includes('staff')) {
        return {
            answer: kipmData.leadership.title + '<br><br>' + kipmData.leadership.content,
            suggestions: ["Faculty qualifications?", "Student-teacher ratio?", "Faculty experience?"]
        };
    }
    
    // Achievement/Ranking questions
    else if (questionLower.includes('ranking') || questionLower.includes('achievement') || 
             questionLower.includes('award') || questionLower.includes('recognition') ||
             questionLower.includes('position') || questionLower.includes('best')) {
        return {
            answer: kipmData.achievements.title + '<br><br>' + kipmData.achievements.content,
            suggestions: ["What makes KIPM special?", "Recent achievements?", "Compared to other colleges?"]
        };
    }
    
    // Admission-related questions
    else if (questionLower.includes('admission') || questionLower.includes('apply') || 
             questionLower.includes('eligibility') || questionLower.includes('entrance') ||
             questionLower.includes('requirement') || questionLower.includes('criteria')) {
        return {
            answer: `ğŸ“ <strong>KIPM Admission Process 2024</strong><br><br>
            <strong>ğŸ“‹ Eligibility Criteria:</strong><br>
            â€¢ <strong>Engineering:</strong> 10+2 with PCM, JEE/UPSEE scores<br>
            â€¢ <strong>Management:</strong> 10+2 any stream, entrance exam<br>
            â€¢ <strong>Pharmacy:</strong> 10+2 with PCB/PCM<br>
            â€¢ <strong>Commerce:</strong> 10+2 any stream<br><br>
            
            <strong>ğŸ“ Application Process:</strong><br>
            â€¢ Online application form<br>
            â€¢ Document verification<br>
            â€¢ Merit list publication<br>
            â€¢ Counseling and seat allotment<br><br>
            
            <strong>ğŸ“… Important Dates:</strong><br>
            â€¢ Application starts: May 2024<br>
            â€¢ Last date: July 2024<br>
            â€¢ Classes begin: August 2024<br><br>
            
            <strong>ğŸ“ Admission Helpline:</strong> +91-9519113070`,
            suggestions: ["What documents needed?", "Admission fee details?", "Last date to apply?"]
        };
    }
    
    // Default response
    else {
        return {
            answer: `ğŸ¤– <strong>Hello! I'm your KIPM AI Assistant</strong><br><br>
            I can help you with comprehensive information about:<br><br>
            
            ğŸ’° <strong>Fee Structure</strong> - Complete cost breakdown for all courses<br>
            ğŸ“ <strong>Academic Programs</strong> - Engineering, Management, Pharmacy, Commerce<br>
            ğŸ’¼ <strong>Placements</strong> - Companies, packages, career opportunities<br>
            ğŸ“ <strong>Contact Information</strong> - Phone numbers, address, office hours<br>
            ğŸ¢ <strong>Campus Facilities</strong> - Hostel, sports, library, transport<br>
            ğŸ‘¨â€ğŸ« <strong>Faculty & Leadership</strong> - Department heads, faculty strength<br>
            ğŸ† <strong>Achievements</strong> - Rankings, awards, recognition<br>
            ğŸ“‹ <strong>Admissions</strong> - Process, eligibility, important dates<br><br>
            
            <strong>Try asking:</strong><br>
            "What is the fee structure for engineering?"<br>
            "Tell me about placement statistics"<br>
            "What facilities are available?"<br><br>
            
            Use the quick buttons above or type your specific question!`,
            suggestions: ["Show me fee structure", "Tell me about courses", "Placement information", "Contact details"]
        };
    }
}

// Add message to chat
function addMessage(text, sender) {
    const chatMessages = document.getElementById('chatMessages');
    const messageDiv = document.createElement('div');
    messageDiv.className = `message ${sender}`;
    
    const avatar = document.createElement('div');
    avatar.className = 'message-avatar';
    avatar.textContent = sender === 'user' ? 'ğŸ‘¤' : 'ğŸ¤–';
    
    const content = document.createElement('div');
    content.className = 'message-content';
    content.innerHTML = text;
    
    const time = document.createElement('div');
    time.className = 'message-time';
    time.textContent = getCurrentTime();
    
    messageDiv.appendChild(avatar);
    messageDiv.appendChild(content);
    content.appendChild(time);
    chatMessages.appendChild(messageDiv);
    
    // Scroll to bottom
    chatMessages.scrollTop = chatMessages.scrollHeight;
}

// Add suggestion chips
function addSuggestionChips(suggestions) {
    const lastMessage = document.querySelector('.message.bot:last-child .message-content');
    if (lastMessage && suggestions.length > 0) {
        const suggestionContainer = document.createElement('div');
        suggestionContainer.className = 'suggestion-chips';
        
        suggestions.forEach(suggestion => {
            const chip = document.createElement('div');
            chip.className = 'suggestion-chip';
            chip.textContent = suggestion;
            chip.onclick = () => askQuestion(suggestion);
            suggestionContainer.appendChild(chip);
        });
        
        lastMessage.appendChild(suggestionContainer);
    }
}

// Show/hide typing indicator
function showTypingIndicator() {
    document.getElementById('typingIndicator').style.display = 'flex';
    document.getElementById('chatMessages').scrollTop = document.getElementById('chatMessages').scrollHeight;
}

function hideTypingIndicator() {
    document.getElementById('typingIndicator').style.display = 'none';
}

// Get current time
function getCurrentTime() {
    const now = new Date();
    return now.toLocaleTimeString('en-US', { 
        hour: '2-digit', 
        minute: '2-digit',
        hour12: true 
    });
}

// Auto-focus input when typing
document.addEventListener('keypress', function(event) {
    const input = document.getElementById('chatInput');
    if (event.target !== input) {
        input.focus();
    }
});

// Keyboard shortcuts
document.addEventListener('keydown', function(event) {
    if (event.ctrlKey && event.key === 'Enter') {
        sendMessage();
    }
    if (event.key === 'Escape') {
        document.getElementById('chatInput').value = '';
    }
});