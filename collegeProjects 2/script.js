// KIPM Knowledge Base - All data stored in JavaScript
const kipmData = {
    fees: {
        title: "💰 KIPM Fee Structure 2024",
        content: `
        <strong>🎓 Engineering (B.Tech):</strong><br>
        • Annual Tuition Fee: ₹85,000 - ₹95,000<br>
        • One-time Admission Fee: ₹15,000<br>
        • Hostel Fee: ₹55,000 - ₹65,000 per year<br>
        • Mess Fee: ₹35,000 - ₹40,000 per year<br><br>
        
        <strong>💼 Management Programs:</strong><br>
        • MBA: ₹75,000 - ₹85,000 per year<br>
        • BBA: ₹55,000 - ₹65,000 per year<br>
        • BCA: ₹45,000 - ₹55,000 per year<br><br>
        
        <strong>💊 Pharmacy Programs:</strong><br>
        • B.Pharm: ₹70,000 - ₹80,000 per year<br>
        • D.Pharm: ₹50,000 - ₹60,000 per year<br><br>
        
        <strong>📚 Commerce:</strong><br>
        • B.Com: ₹40,000 - ₹50,000 per year<br><br>
        
        <strong>🎯 Additional Costs:</strong><br>
        • Books & Study Material: ₹8,000 - ₹12,000<br>
        • Uniform & ID Card: ₹3,000 - ₹5,000<br>
        • Transport (optional): ₹15,000 - ₹25,000<br><br>
        
        <strong>💳 Payment Options:</strong><br>
        • Semester-wise payment available<br>
        • Education loan assistance<br>
        • EMI facilities available<br>
        • Scholarships for merit students
        `
    },
    courses: {
        title: "🎓 KIPM Academic Programs",
        content: `
        <strong>🔹 Engineering (B.Tech) - AKTU Code: 751</strong><br>
        • Computer Science & Engineering<br>
        • Mechanical Engineering<br>
        • Civil Engineering<br>
        • Electrical Engineering<br>
        • Electronics & Communication Engineering<br>
        • Duration: 4 years<br><br>
        
        <strong>🔹 Management Programs - AKTU Code: 517</strong><br>
        • MBA (Master of Business Administration) - 2 years<br>
        • BBA (Bachelor of Business Administration) - 3 years<br>
        • BCA (Bachelor of Computer Applications) - 3 years<br><br>
        
        <strong>🔹 Pharmacy Programs - AKTU Code: 516</strong><br>
        • B.Pharm (Bachelor of Pharmacy) - 4 years<br>
        • M.Pharm (Master of Pharmacy) - 2 years<br>
        • D.Pharm (Diploma in Pharmacy) - 2 years<br><br>
        
        <strong>🔹 Commerce - DDU Code: 858</strong><br>
        • B.Com (Bachelor of Commerce) - 3 years<br><br>
        
        <strong>📋 Admission Requirements:</strong><br>
        • Valid entrance exam scores (JEE/UPSEE for Engineering)<br>
        • 10+2 qualification from recognized board<br>
        • Merit-based selection process<br>
        • All programs are AICTE approved
        `
    },
    placements: {
        title: "💼 KIPM Placement Excellence",
        content: `
        <strong>🏆 Outstanding Statistics:</strong><br>
        • <strong>245+ Recruiting Companies</strong><br>
        • <strong>1885+ Job Offers</strong><br>
        • <strong>Highest Package:</strong> ₹12+ LPA<br>
        • <strong>Average Package:</strong> ₹4.5 LPA<br>
        • <strong>Placement Rate:</strong> 85%+<br><br>
        
        <strong>🏢 Top IT Companies:</strong><br>
        • TCS, Infosys, Wipro, HCL Technologies<br>
        • Tech Mahindra, Cognizant, Accenture<br>
        • Microsoft, Google (selected students)<br><br>
        
        <strong>🏦 Banking & Finance:</strong><br>
        • HDFC Bank, Kotak Mahindra Bank<br>
        • Bandhan Bank, Annapurna Finance<br>
        • ICICI Bank, SBI<br><br>
        
        <strong>🏭 Manufacturing & Core:</strong><br>
        • Maruti Suzuki, Bajaj Auto<br>
        • Kent RO Systems, L&T<br>
        • Tata Motors, Forever Distillery<br><br>
        
        <strong>📚 Education Sector:</strong><br>
        • BYJU'S, Physics Wallah<br>
        • Unacademy, Exotic Learning<br>
        • Vedantu, Toppr<br><br>
        
        <strong>🎯 Placement Support:</strong><br>
        • Dedicated placement cell<br>
        • Industry-oriented training<br>
        • Mock interviews & group discussions<br>
        • Resume building workshops<br>
        • Soft skills development
        `
    },
    contact: {
        title: "📞 KIPM Contact Information",
        content: `
        <strong>🏫 Main Campus Address:</strong><br>
        KIPM-Technical Campus<br>
        BL 1 & 2, Sector-9, GIDA<br>
        Gorakhpur, Uttar Pradesh - 273209<br><br>
        
        <strong>📱 Admission Helplines:</strong><br>
        • <strong>Engineering & Management:</strong> +91-9519113070<br>
        • <strong>Pharmacy Programs:</strong> +91-8009902936<br>
        • <strong>General Inquiries:</strong> +91-8009902937<br>
        • <strong>Additional Support:</strong> +91-8009902938<br><br>
        
        <strong>🏢 City Office:</strong><br>
        Charu Chandrapuri<br>
        Near Cantt Thana<br>
        Gorakhpur - 273001<br><br>
        
        <strong>🌐 Online Presence:</strong><br>
        • Website: www.kipm.edu.in<br>
        • Email: info@kipm.edu.in<br><br>
        
        <strong>⏰ Office Hours:</strong><br>
        • Monday to Saturday: 9:00 AM - 5:00 PM<br>
        • Sunday: Closed<br>
        • Emergency Contact: Available 24/7
        `
    },
    facilities: {
        title: "🏢 KIPM World-Class Facilities",
        content: `
        <strong>🏠 Hostel Facilities:</strong><br>
        • Separate boys and girls hostels<br>
        • TV lounge and recreational areas<br>
        • Computer lab with internet access<br>
        • Swimming pool and gymnasium<br>
        • Reading rooms and study areas<br>
        • Indoor games: Table tennis, carrom, chess<br>
        • 24/7 security and CCTV surveillance<br>
        • Laundry and housekeeping services<br><br>
        
        <strong>🏥 Medical Facilities:</strong><br>
        • On-campus medical center<br>
        • Qualified medical staff<br>
        • Free medical aid for students<br>
        • Medical insurance coverage<br>
        • Tie-ups with local hospitals<br>
        • Emergency medical services<br><br>
        
        <strong>⚽ Sports & Recreation:</strong><br>
        • Multiple sports grounds<br>
        • Basketball and volleyball courts<br>
        • Cricket ground with proper facilities<br>
        • Badminton courts (indoor)<br>
        • Gym with modern equipment<br>
        • Yoga and meditation center<br><br>
        
        <strong>🚌 Transport Facility:</strong><br>
        • College bus service from various routes<br>
        • GPS-enabled buses for safety<br>
        • Trained and verified drivers<br>
        • Regular maintenance and safety checks<br><br>
        
        <strong>🎤 Academic Infrastructure:</strong><br>
        • 4 air-conditioned seminar halls (150 seats each)<br>
        • Modern audio-visual equipment<br>
        • High-speed internet (Wi-Fi campus)<br>
        • Well-equipped laboratories<br>
        • Central library with digital resources<br>
        • Computer labs with latest software
        `
    },
    leadership: {
        title: "👨‍💼 KIPM Leadership & Faculty",
        content: `
        <strong>🎯 Leadership Team:</strong><br><br>
        
        <strong>Er. R.D. Singh</strong> - Founder & Chairman<br>
        <em>"Nurturing Ethical Technocrats"</em><br>
        • Visionary leader with 25+ years in education<br>
        • Committed to engineering excellence<br><br>
        
        <strong>Mr. Vinod Kumar Singh</strong> - Secretary<br>
        <em>"Providing Culture Base, Professional Environment"</em><br>
        • Building treasure-house of talent and intelligence<br><br>
        
        <strong>Dr. M.Z.R. Khan</strong> - Director, Engineering<br>
        • Leading College of Engineering & Technology<br>
        • 11 years of glorious legacy<br><br>
        
        <strong>Dr. J.N. Mishra</strong> - Director, Pharmacy<br>
        • Managing pharmacy programmes with excellence<br><br>
        
        <strong>Dr. Deepak Kumar Srivastava</strong> - Director, Management<br>
        • Leading College of Management Studies<br><br>
        
        <strong>👨‍🏫 Faculty Strength:</strong><br>
        • <strong>155+ Faculty Members</strong><br>
        • PhD qualified professors: 60%<br>
        • Industry experienced faculty: 40%<br>
        • Student-Faculty ratio: 15:1<br>
        • Regular faculty development programs<br><br>
        
        <strong>🏛️ Departments:</strong><br>
        • <strong>12 Specialized Departments</strong><br>
        • All departments with experienced faculty<br>
        • Modern labs and equipment
        `
    },
    achievements: {
        title: "🏆 KIPM Achievements & Recognition",
        content: `
        <strong>🥉 RANKED 13th POSITION AMONGST TOP 25 COLLEGES BY AKTU</strong><br>
        <em>A prestigious recognition of our academic excellence</em><br><br>
        
        <strong>📊 Institutional Statistics:</strong><br>
        • <strong>155 Faculty Members</strong><br>
        • <strong>12 Academic Departments</strong><br>
        • <strong>15 Awards & Recognition</strong><br>
        • <strong>2500+ Students</strong><br>
        • <strong>245+ Recruiting Companies</strong><br>
        • <strong>1885+ Job Offers</strong><br><br>
        
        <strong>🎓 Academic Excellence:</strong><br>
        • AICTE approved programs<br>
        • AKTU affiliated courses<br>
        • High pass percentage in university exams<br>
        • Research publications by faculty<br><br>
        
        <strong>🏅 Recent Achievements:</strong><br>
        • Best Engineering College Award (Regional)<br>
        • Excellence in Placement Award<br>
        • Innovation in Teaching Award<br>
        • Industry Interface Excellence<br>
        • Social Responsibility Recognition
        `
    }
};

// Initialize chat when page loads
document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('welcomeTime').textContent = getCurrentTime();
    document.getElementById('chatInput').focus();
});

// Handle Enter key press
function handleKeyPress(event) {
    if (event.key === 'Enter') {
        sendMessage();
    }
}

// Send message function
function sendMessage() {
    const input = document.getElementById('chatInput');
    const message = input.value.trim();
    
    if (message) {
        addMessage(message, 'user');
        input.value = '';
        
        // Show typing indicator
        showTypingIndicator();
        
        // Generate response
        setTimeout(() => {
            hideTypingIndicator();
            const response = generateAIResponse(message);
            addMessage(response.answer, 'bot');
            
            // Add suggestion chips
            if (response.suggestions) {
                addSuggestionChips(response.suggestions);
            }
        }, 1000);
    }
}

// Quick question function
function askQuestion(question) {
    addMessage(question, 'user');
    showTypingIndicator();
    
    setTimeout(() => {
        hideTypingIndicator();
        const response = generateAIResponse(question);
        addMessage(response.answer, 'bot');
        
        if (response.suggestions) {
            addSuggestionChips(response.suggestions);
        }
    }, 800);
}

// Enhanced AI response generator
function generateAIResponse(question) {
    const questionLower = question.toLowerCase();
    
    // Fee-related questions
    if (questionLower.includes('fee') || questionLower.includes('cost') || 
        questionLower.includes('price') || questionLower.includes('money') ||
        questionLower.includes('expense') || questionLower.includes('scholarship')) {
        return {
            answer: kipmData.fees.title + '<br><br>' + kipmData.fees.content,
            suggestions: ["Payment options available?", "Any scholarships offered?", "Hostel fees included?"]
        };
    }
    
    // Course-related questions
    else if (questionLower.includes('course') || questionLower.includes('program') || 
             questionLower.includes('study') || questionLower.includes('degree') ||
             questionLower.includes('branch') || questionLower.includes('engineering')) {
        return {
            answer: kipmData.courses.title + '<br><br>' + kipmData.courses.content,
            suggestions: ["What are eligibility criteria?", "How to apply for admission?", "What is the duration?"]
        };
    }
    
    // Placement-related questions
    else if (questionLower.includes('placement') || questionLower.includes('job') || 
             questionLower.includes('career') || questionLower.includes('salary') ||
             questionLower.includes('package') || questionLower.includes('company')) {
        return {
            answer: kipmData.placements.title + '<br><br>' + kipmData.placements.content,
            suggestions: ["Which companies visit most?", "How to prepare for placements?", "What's the selection process?"]
        };
    }
    
    // Contact-related questions
    else if (questionLower.includes('contact') || questionLower.includes('phone') || 
             questionLower.includes('address') || questionLower.includes('location') ||
             questionLower.includes('reach') || questionLower.includes('helpline')) {
        return {
            answer: kipmData.contact.title + '<br><br>' + kipmData.contact.content,
            suggestions: ["How to reach campus?", "What are office hours?", "Any other contact methods?"]
        };
    }
    
    // Facility-related questions
    else if (questionLower.includes('facility') || questionLower.includes('hostel') || 
             questionLower.includes('sports') || questionLower.includes('amenity') ||
             questionLower.includes('campus') || questionLower.includes('library')) {
        return {
            answer: kipmData.facilities.title + '<br><br>' + kipmData.facilities.content,
            suggestions: ["Hostel booking process?", "Sports activities available?", "Library timings?"]
        };
    }
    
    // Leadership/Faculty questions
    else if (questionLower.includes('faculty') || questionLower.includes('teacher') || 
             questionLower.includes('director') || questionLower.includes('leadership') ||
             questionLower.includes('chairman') || questionLower.includes('staff')) {
        return {
            answer: kipmData.leadership.title + '<br><br>' + kipmData.leadership.content,
            suggestions: ["Faculty qualifications?", "Student-teacher ratio?", "Faculty experience?"]
        };
    }
    
    // Achievement/Ranking questions
    else if (questionLower.includes('ranking') || questionLower.includes('achievement') || 
             questionLower.includes('award') || questionLower.includes('recognition') ||
             questionLower.includes('position') || questionLower.includes('best')) {
        return {
            answer: kipmData.achievements.title + '<br><br>' + kipmData.achievements.content,
            suggestions: ["What makes KIPM special?", "Recent achievements?", "Compared to other colleges?"]
        };
    }
    
    // Admission-related questions
    else if (questionLower.includes('admission') || questionLower.includes('apply') || 
             questionLower.includes('eligibility') || questionLower.includes('entrance') ||
             questionLower.includes('requirement') || questionLower.includes('criteria')) {
        return {
            answer: `🎓 <strong>KIPM Admission Process 2024</strong><br><br>
            <strong>📋 Eligibility Criteria:</strong><br>
            • <strong>Engineering:</strong> 10+2 with PCM, JEE/UPSEE scores<br>
            • <strong>Management:</strong> 10+2 any stream, entrance exam<br>
            • <strong>Pharmacy:</strong> 10+2 with PCB/PCM<br>
            • <strong>Commerce:</strong> 10+2 any stream<br><br>
            
            <strong>📝 Application Process:</strong><br>
            • Online application form<br>
            • Document verification<br>
            • Merit list publication<br>
            • Counseling and seat allotment<br><br>
            
            <strong>📅 Important Dates:</strong><br>
            • Application starts: May 2024<br>
            • Last date: July 2024<br>
            • Classes begin: August 2024<br><br>
            
            <strong>📞 Admission Helpline:</strong> +91-9519113070`,
            suggestions: ["What documents needed?", "Admission fee details?", "Last date to apply?"]
        };
    }
    
    // Default response
    else {
        return {
            answer: `🤖 <strong>Hello! I'm your KIPM AI Assistant</strong><br><br>
            I can help you with comprehensive information about:<br><br>
            
            💰 <strong>Fee Structure</strong> - Complete cost breakdown for all courses<br>
            🎓 <strong>Academic Programs</strong> - Engineering, Management, Pharmacy, Commerce<br>
            💼 <strong>Placements</strong> - Companies, packages, career opportunities<br>
            📞 <strong>Contact Information</strong> - Phone numbers, address, office hours<br>
            🏢 <strong>Campus Facilities</strong> - Hostel, sports, library, transport<br>
            👨‍🏫 <strong>Faculty & Leadership</strong> - Department heads, faculty strength<br>
            🏆 <strong>Achievements</strong> - Rankings, awards, recognition<br>
            📋 <strong>Admissions</strong> - Process, eligibility, important dates<br><br>
            
            <strong>Try asking:</strong><br>
            "What is the fee structure for engineering?"<br>
            "Tell me about placement statistics"<br>
            "What facilities are available?"<br><br>
            
            Use the quick buttons above or type your specific question!`,
            suggestions: ["Show me fee structure", "Tell me about courses", "Placement information", "Contact details"]
        };
    }
}

// Add message to chat
function addMessage(text, sender) {
    const chatMessages = document.getElementById('chatMessages');
    const messageDiv = document.createElement('div');
    messageDiv.className = `message ${sender}`;
    
    const avatar = document.createElement('div');
    avatar.className = 'message-avatar';
    avatar.textContent = sender === 'user' ? '👤' : '🤖';
    
    const content = document.createElement('div');
    content.className = 'message-content';
    content.innerHTML = text;
    
    const time = document.createElement('div');
    time.className = 'message-time';
    time.textContent = getCurrentTime();
    
    messageDiv.appendChild(avatar);
    messageDiv.appendChild(content);
    content.appendChild(time);
    chatMessages.appendChild(messageDiv);
    
    // Scroll to bottom
    chatMessages.scrollTop = chatMessages.scrollHeight;
}

// Add suggestion chips
function addSuggestionChips(suggestions) {
    const lastMessage = document.querySelector('.message.bot:last-child .message-content');
    if (lastMessage && suggestions.length > 0) {
        const suggestionContainer = document.createElement('div');
        suggestionContainer.className = 'suggestion-chips';
        
        suggestions.forEach(suggestion => {
            const chip = document.createElement('div');
            chip.className = 'suggestion-chip';
            chip.textContent = suggestion;
            chip.onclick = () => askQuestion(suggestion);
            suggestionContainer.appendChild(chip);
        });
        
        lastMessage.appendChild(suggestionContainer);
    }
}

// Show/hide typing indicator
function showTypingIndicator() {
    document.getElementById('typingIndicator').style.display = 'flex';
    document.getElementById('chatMessages').scrollTop = document.getElementById('chatMessages').scrollHeight;
}

function hideTypingIndicator() {
    document.getElementById('typingIndicator').style.display = 'none';
}

// Get current time
function getCurrentTime() {
    const now = new Date();
    return now.toLocaleTimeString('en-US', { 
        hour: '2-digit', 
        minute: '2-digit',
        hour12: true 
    });
}

// Auto-focus input when typing
document.addEventListener('keypress', function(event) {
    const input = document.getElementById('chatInput');
    if (event.target !== input) {
        input.focus();
    }
});

// Keyboard shortcuts
document.addEventListener('keydown', function(event) {
    if (event.ctrlKey && event.key === 'Enter') {
        sendMessage();
    }
    if (event.key === 'Escape') {
        document.getElementById('chatInput').value = '';
    }
});